> OpenCV 提供了很多人脸识别方法，它们都是通用类 **cv::face::FaceRecognizer** 的子类。
<br>

### cv::face::LBPHFaceRecognizer
基于最邻近分类法，使用的图像模型基于局部二值模式（local binary pattern，LBP）特征
<br>

调用 cv::face::LBPHFaceRecognizer 的静态函数 **create** 以创建它的实例：
```c++
cv::Ptr<cv::face::FaceRecognizer> recognizer =
    cv::face::createLBPHFaceRecognizer(1, // LBP 模式的半径
        8, // 使用邻近像素的数量
        8, 8, // 网格大小
        200.8); // 最邻近的距离阈值
```
<br>

接着要向识别器输入一批参考人脸图像，具体为提供两个向量，一个存放人脸图像，另一个存放对应的标签。下面是一个简化的例子，只提供两个人，每人两幅图像。调用训练方法的代码为：
```c++
// 参考图像和标签的向量
std::vector<cv::Mat> referenceImages;
std::vector<int> labels;
// 打开参考图像
referenceImages.push_back(cv::imread("face0_1.png",
                          cv::IMREAD_GRAYSCALE));
labels.push_back(0); // 编号为0 的人

referenceImages.push_back(cv::imread("face0_2.png",
                          cv::IMREAD_GRAYSCALE));
labels.push_back(0); // 编号为0 的人

referenceImages.push_back(cv::imread("face1_1.png",
                          cv::IMREAD_GRAYSCALE));
                          
labels.push_back(1); // 编号为1 的人
referenceImages.push_back(cv::imread("face1_2.png",
                          cv::IMREAD_GRAYSCALE));
labels.push_back(1); // 编号为1 的人

// 通过计算LBPH 进行训练
recognizer->train(referenceImages, labels);
```

> 最好把图像归一化，使关键的面部特征处于标准位置。

输入一幅图像，它就可以计算出图中人脸对应的人员编号：
```c++
// 识别图像对应的编号
recognizer->predict(inputImage, // 人脸图像
                    predictedLabel, // 识别结果
                    confidence); // 置信度
```
<br>

置信度数值越小，识别结果越可信。

<br>

### LBP 特征

它是把每个像素转换为一个二进制数模型，表示邻近位置的图像强度模式。规则：将一个局部像素与它的每个邻近像素进行比较，如果它的值大于邻近像素，就把对应的位设为0，否则设为1。最常用的做法是将每个像素与它的 8 个邻近像素做比较，得到 8 位模式，例如下面的局部模式：

| 87   | 98   | 17   |
| ---- | ---- | ---- |
| 21   | 26   | 89   |
| 19   | 24   | 90   |

应用上述规则，得到以下二进制数值：

| 1    | 1    | 0    |
| ---- | ---- | ---- |
| 0    |      | 1    |
| 0    | 0    | 1    |

从左上角的像素开始顺时针方向提取，得到二进制串11011000，用它表示中心的像素。对每个像素计算其LBP 字节，即可得到完整的8 位LBP 图像。这一步由下面的函数实现：




